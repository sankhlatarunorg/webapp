{
    "builders": [
        {
            "type": "googlecompute",
            "credentials_file": "credentials.json",
            "project_id": "csye-6225-tarun-002294529",
            "source_image": "centos-stream-8-v20240110",
            "ssh_username": "centos",
            "zone": "us-east1-b",
            "image_name": "csye6225-image-a3-demo"
        }
    ],
    "provisioners":[
        { 
            "type": "shell",
            "inline": [
              "sudo adduser csye6225 --shell /usr/sbin/nologin"
            ]
        },
        {
            "type": "shell",
            "script": "./scripts/copy-artifact.sh"
        },
        {
            "type":"file",
            "source":"./webapp.zip",
            "destination":"/tmp/webapp/webapp.zip"
        },
        {
            "type":"shell",
            "script" : "./scripts/install_setup_db_dependencies.sh"
        },
        {
            "type": "file",
            "source": "systemd-service/csye-6225.service", 
            "destination": "/tmp/csye-6225.service",
            "direction": "upload"
        },
        {
            "type": "shell",
            "inline": [
                "sudo mv /tmp/csye-6225.service /etc/systemd/system/",
                "sudo systemctl daemon-reload",
                "sudo systemctl enable csye-6225"
            ]
        }
    ]
}
